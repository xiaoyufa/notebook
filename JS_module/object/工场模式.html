<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //安全模式创建的工厂方法函数
        var UserFactory = function (role) {
            console.log(this);
            console.log(this instanceof UserFactory)
            if (this instanceof UserFactory) {
                var s = new this[role]();
                return s;
            } else {
                return new UserFactory(role);
            }
        }
        console.log('UserFactory',UserFactory);
        //工厂方法函数的原型中设置所有对象的构造函数
        UserFactory.prototype = {
            Admin: function () {
                this.name = "管理员";
                this.viewPage = ['首页', '查询', '权限管理'];
            },
            User: function () {
                this.name = '用户';
                this.viewPage = ['首页', '查询'];
            }
        }
        console.log('UserFactory',UserFactory);
        //调用
        var admin = UserFactory('Admin');
        console.log(admin);
        var user = UserFactory('User');
        console.log(user)


    </script>
</body>

</html>